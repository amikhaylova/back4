(this.webpackJsonpweb_lab4_front=this.webpackJsonpweb_lab4_front||[]).push([[0],{161:function(e,t,n){e.exports=n(322)},258:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);n(162);var a=n(0),r=n.n(a),o=n(32),i=(n(67),n(13)),c=n(125),l=n(124),u=n(20),s=n(126),p={jwt:"a",auth:!1,points:[],current_r:""};var f=n(18),m=n.n(f),h=Object(i.combineReducers)({form:l.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_POINTS":return Object(u.a)({},e,{points:t.payload});case"@@redux-form/BLUR":return"r"==t.meta.field?Object(u.a)({},e,{current_r:t.payload}):Object(u.a)({},e);case"LOGIN_REQUEST":return Object(u.a)({},e);case"LOGIN_SUCCESS":return Object(u.a)({},e,{auth:!0,jwt:t.payload.jwt});case"LOGIN_FAIL":return s.NotificationManager.success("You have added a new book!","Successful!",2e3),Object(u.a)({},e,{auth:!1});case"LOGOUT_SUCCESS":return Object(u.a)({},e,{auth:!1,jwt:" ",points:[],current_r:""});case"REG_REQUEST":case"REG_SUCCESS":case"REG_FAIL":return Object(u.a)({},e);default:return e}},notifications:f.reducer}),d=n(7),b=n(129),v=n(130),O=n.n(v),g=n(15),j=n(8),y=n(9),E=n(11),_=n(10),S=n(12),C=n(122),w=n(28),k=n(123),N=function(e){if(!e)return"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},T=function(e){if(e&&e.length>15)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},P=function(e,t){return t.reg_pas1===t.reg_pas2?void 0:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442"},x=function(e){if(e&&e.length>6)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},R=function(e){var t;return isNaN(e)?"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e":(t=parseFloat(e))<=-5||t>=5?"\u0427\u0438\u0441\u043b\u043e X \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 \u043e\u0442 -5 \u0434\u043e 5":void 0},U=function(e){var t;return isNaN(e)?"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e":(t=parseFloat(e))<=-3||t>=3?"\u0427\u0438\u0441\u043b\u043e Y \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 \u043e\u0442 -3 \u0434\u043e 3":void 0},F=function(e){var t;return isNaN(e)?"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e":(t=parseFloat(e))<=-5||t>=5?"\u0427\u0438\u0441\u043b\u043e R \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 \u043e\u0442 -5 \u0434\u043e 5":t<=0?"\u0422\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e R":void 0};n(258);function I(e){return console.log("In send_not"),function(t){t(m.a.error(function(e){var t=new Object;return t.title="\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0435\u0439",t.message=e,t.position="tr",t.autoDismiss=3,t}(e)))}}var G=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.meta,t=this.props.input,n=this.props;console.log(e.error);var a=e.touched&&e.error;return a&&this.props.send_not(e.error),r.a.createElement("div",{className:"formControl "+(a?"error":"")},r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,n,{id:"o"}))))}}]),t}(r.a.Component);var A=Object(d.connect)((function(e){return{}}),(function(e){return{send_not:function(t){return e(I(t))}}}))(G),L=Object(k.a)({form:"auth_form",onSubmitSuccess:function(e,t){return t(Object(w.a)("auth_form"))}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"),r.a.createElement(C.a,{component:A,id:"loginField",type:"text",name:"auth_login",placeholder:"\u041b\u043e\u0433\u0438\u043d",autoComplete:"off",validate:[N,T]}),r.a.createElement("div",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(C.a,{component:A,id:"passwordField",type:"password",name:"auth_pas",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",validate:[N,T]}),r.a.createElement("button",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))})),J={title:"\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :( \n\u0411\u0435\u0434\u0430-\u043f\u0435\u0447\u0430\u043b\u044c-\u043e\u0433\u043e\u0440\u0447\u0435\u043d\u0438\u0435",position:"tc",autoDismiss:3},Y={title:"\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(\n\u0411\u0435\u0434\u0430-\u043f\u0435\u0447\u0430\u043b\u044c-\u043e\u0433\u043e\u0440\u0447\u0435\u043d\u0438\u0435",position:"tc",autoDismiss:3},D={title:"\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",message:"\u041b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0435.",position:"tc",autoDismiss:3},W={title:"\u0423\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",message:"\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u043d\u0430\u0448\u0438 \u043f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c.",position:"tc",autoDismiss:3},X={title:"\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443",message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0434\u0438\u0443\u0441\u0430: (0...5).",position:"tc",autoDismiss:3};var B=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){n.props.login(e)},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content form_container"},r.a.createElement("h2",null,"\u0410\u0412\u0422\u041e\u0420\u0418\u0417\u0410\u0426\u0418\u042f"),r.a.createElement(L,{onSubmit:this.onSubmit.bind(this)}))}}]),t}(r.a.Component);var H=Object(d.connect)((function(e){return{}}),(function(e){return{login:function(t){return e(function(e){var t=new Object;return t.login=e.auth_login,t.password=e.auth_pas,function(e){e({type:"LOGIN_REQUEST"});console.log(t),console.log(JSON.stringify(t)),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return console.log("Status: "+t.status),t.ok||(e(m.a.error(J)),e({type:"LOGIN_FAIL",payload:t})),t})).then((function(e){return e.json()})).then((function(t){console.log(t.jwt),void 0!==t.jwt&&(e({type:"LOGIN_SUCCESS",payload:t}),e({type:"ROUTING",payload:{method:"replace",nextUrl:"/points"}}))}))}}(t))}}}))(B),M=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21164"),r.a.createElement("div",{className:"mainWrapper"},"\u041d\u0438\u043a\u043e\u0434\u0430 \u0435\u0449\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u0445\u0443\u0436\u0435 \u043d\u0435 \u0434\u0435\u043b\u0430\u043b\u0430.",r.a.createElement("br",null),"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."))}}]),t}(a.Component),Q=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"\u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432\u0430 \u0410.\u0410.",r.a.createElement("br",null),"\u0433\u0440.P3211, \u0432\u0430\u0440\u0438\u0430\u043d\u0442 462"))}}]),t}(a.Component),z=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.notifications;return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,r.a.createElement(g.b,{to:"/",onlyActiveOnIndex:!0,activeClassName:"active"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430")),r.a.createElement("li",null,r.a.createElement(g.b,{exact:!0,to:"/login",activeClassName:"active"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/registration",activeClassName:"active"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),r.a.createElement(m.a,{notifications:e}),this.props.children)}}]),t}(a.Component),q=Object(d.connect)((function(e){return{notifications:e.notifications}}))(z),K=Object(k.a)({form:"reg_form",onSubmitSuccess:function(e,t){return t(Object(w.a)("reg_form"))}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"),r.a.createElement(C.a,{component:A,id:"loginField",type:"text",name:"reg_login",placeholder:"\u041b\u043e\u0433\u0438\u043d",autoComplete:"off",validate:[N,T]}),r.a.createElement("div",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(C.a,{component:A,id:"passwordField",type:"password",name:"reg_pas1",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",validate:[N,T]}),r.a.createElement("div",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(C.a,{component:A,id:"passwordField",type:"password",name:"reg_pas2",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",validate:[N,T,P]}),r.a.createElement("button",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))})),V=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){n.props.registrate(e)},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content form_container"},r.a.createElement("h2",null,"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"),r.a.createElement(K,{onSubmit:this.onSubmit.bind(this)}))}}]),t}(a.Component);var Z=Object(d.connect)((function(e){return{failed_reg:e.user.failed_reg,suc_reg:e.user.suc_reg}}),(function(e){return{registrate:function(t){return e((n=t,function(e){e({type:"REG_REQUEST"}),console.log("before fetch"),console.log(n),console.log("URL: /register");var t=new Object;t.login=n.reg_login,t.password=n.reg_pas1,console.log(t),console.log(JSON.stringify(t)),fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.ok||(e(m.a.error(Y)),e({type:"REG_FAIL",payload:t})),t})).then((function(e){return e.json()})).then((function(t){console.log("Reg: "+t.reg),"true"==t.reg?(e(m.a.success(W)),e({type:"REG_SUCCESS",payload:t})):"false"==t.reg&&(e(m.a.error(D)),e({type:"REG_FAIL",payload:t}))}))}));var n}}}))(V),$=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 ",r.a.createElement(g.b,{to:"/"},"\u0433\u043b\u0430\u0432\u043d\u0443\u044e"),"?")}}]),t}(a.Component);function ee(e){return console.log(e),function(t){var n="Bearer ".concat(e.jwt),a=e.url,r=new Object;r.x=e.x,r.y=e.y,r.r=e.r,console.log("Object "+JSON.stringify(r)),console.log("Header "+n),fetch(a,{method:"POST",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return console.log("Status: "+e.status),e.ok,e})).then((function(e){return e.json()})).then((function(a){console.log(a);var r=new Object;r.r=e.r,console.log("getPoints!"),fetch("/getPoints",{method:"POST",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return console.log("Status: "+e.status),e.ok,e})).then((function(e){return e.json()})).then((function(e){t({type:"CHANGE_POINTS",payload:e}),console.log(e)}))}))}}function te(e){return function(t){var n="Bearer ".concat(e.jwt),a=new Object;a.r=e.r,console.log("Object "+JSON.stringify(a)),console.log("Header "+n),fetch("/getPoints",{method:"POST",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return console.log("Status: "+e.status),e.ok,e})).then((function(e){return e.json()})).then((function(e){t({type:"CHANGE_POINTS",payload:e}),console.log(e)}))}}var ne=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=n.props.r,a=!1;if(isNaN(t)?a=!1:(t=parseFloat(t))>0&&t<5&&t.toString.length<7&&(a=!0),a){var r,o,i,c;n.refs.canvas.clientWidth;r=n.getCP_X_pix(e),o=n.getCP_Y_pix(e),i=n.getCP_X_canvas(r,n.props.r),c=n.getCP_Y_canvas(o,n.props.r);var l=new Object;l.x=i,l.y=c,l.r=n.props.r,l.jwt=n.props.jwt,l.url="/addPoint",console.log(l),n.props.send_form(l)}else n.props.send_notification()},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){console.log("didMountCanvas"),this.updateCanvas()}},{key:"componentDidUpdate",value:function(e,t,n){console.log("didUpdateCanvas"),this.updateCanvas()}},{key:"updateCanvas",value:function(){var e=this,t=this.refs.canvas.getContext("2d");t.clearRect(0,0,300,300),function(e,t){var n=t/2,a=2/3*n;e.fillStyle="#0099FF",e.strokeStyle="black",e.beginPath(),e.arc(n,n,a/2,0,.5*Math.PI,!1),e.lineTo(n,n),e.fill(),e.closePath(),e.beginPath(),e.lineTo(1/3*n,n),e.lineTo(n,1/3*n),e.lineTo(n,n),e.fill(),e.closePath(),e.beginPath(),e.lineTo(n,1/3*n),e.lineTo(n+a/2,1/3*n),e.lineTo(n+a/2,n),e.lineTo(n,n),e.fill(),e.closePath(),e.strokeStyle="black",e.lineWidth=.5,e.beginPath(),e.moveTo(n,0),e.lineTo(n,2*n),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(0,n),e.lineTo(2*n,n),e.closePath(),e.stroke()}(t,this.refs.canvas.width),this.props.points.map((function(n){return e.redraw_point(t,n),!0}))}},{key:"draw_point",value:function(e,t,n,a){e.fillStyle="yes"==a?"green":""==a?"grey":"red",e.beginPath(),e.rect(t-2.5,n-2.5,5,5),e.fill()}},{key:"redraw_point",value:function(e,t){t.r!=this.props.r?this.draw_point(e,this.back_to_X_pix(t.x,this.props.r),this.back_to_Y_pix(t.y,this.props.r),""):this.draw_point(e,this.back_to_X_pix(t.x,t.r),this.back_to_Y_pix(t.y,t.r),t.hit)}},{key:"getCP_X_pix",value:function(e){var t=this.refs.canvas.getBoundingClientRect(),n=t.left;t.top;return e.clientX-n}},{key:"getCP_Y_pix",value:function(e){var t=this.refs.canvas.getBoundingClientRect(),n=(t.left,t.top);return e.clientY-n}},{key:"getCP_X_canvas",value:function(e,t){var n=this.refs.canvas.clientWidth/2;return(t/(2/3*n)*(e-n)).toFixed(2)}},{key:"getCP_Y_canvas",value:function(e,t){var n=this.refs.canvas.clientWidth/2;return(-t/(2/3*n)*(e-n)).toFixed(2)}},{key:"back_to_X_pix",value:function(e,t){var n=this.refs.canvas.clientWidth/2;return(2/3*n*e+n*t)/t}},{key:"back_to_Y_pix",value:function(e,t){var n=this.refs.canvas.clientWidth/2;return(-2/3*n*e+n*t)/t}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"plot",ref:"canvas",width:300,height:300,onClick:this.handleClick}))}}]),t}(r.a.Component);var ae=Object(d.connect)((function(e){return{notifications:e.notifications,jwt:e.user.jwt,r:e.user.current_r,points:e.user.points}}),(function(e){return{send_form:function(t){return e(ee(t))},get_points:function(t){return e(te(t))},send_notification:function(){return e((function(e){e(m.a.error(X))}))}}}))(ne),re=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,r.a.createElement(g.b,{onClick:this.props.logout,activeClassName:"active"},"LogOut"))))}}]),t}(a.Component);var oe=Object(d.connect)((function(e){return{}}),(function(e){return{logout:function(t){return e({type:"LOGOUT_SUCCESS"})}}}))(re),ie=Object(k.a)({form:"point_form",onSubmitSuccess:function(e,t){return t(Object(w.a)("point_form"))}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 R:"),r.a.createElement(C.a,{component:A,id:"rField",type:"text",name:"r",placeholder:"(-5 ... 5)",autoComplete:"off",validate:[N,x,F]}),r.a.createElement("div",null," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 X:"),r.a.createElement(C.a,{component:A,id:"xField",type:"text",name:"x",placeholder:"(-5 ... 5)",autoComplete:"off",validate:[N,x,R]}),r.a.createElement("div",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Y:"),r.a.createElement(C.a,{component:A,id:"yField",type:"text",name:"y",placeholder:"(-3 ... 3)",autoComplete:"off",validate:[N,x,U]}),r.a.createElement("button",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c"))})),ce=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){n.props.jwt;console.log("JWT: "+n.props.jwt),e.jwt=n.props.jwt,e.url="/addPoint",n.props.send_form(e)},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidUpdate",value:function(e){console.log("in update");var t=this.props;if(console.log(t.r),e.r!==t.r){var n=t.r,a=!1;if(isNaN(n)?a=!1:(n=parseFloat(n))>0&&n<5&&n.toString.length<7&&(a=!0),a){console.log("prepare to send a request");var r=new Object;r.r=n,r.jwt=this.props.jwt,this.props.get_points(r)}}}},{key:"render",value:function(){var e=this.props.r,t=!1;return isNaN(e)?t=!1:(e=parseFloat(e))>0&&e<5&&e.toString().length<7&&(t=!0),r.a.createElement("div",{className:"object_wrapper"},r.a.createElement("div",{id:"label"},"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 R: ",t?this.props.r:"\u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),r.a.createElement(ie,{onSubmit:this.onSubmit.bind(this)}))}}]),t}(a.Component);var le=Object(d.connect)((function(e){return{notifications:e.notifications,jwt:e.user.jwt,r:e.user.current_r,points:e.user.points}}),(function(e){return{logout:function(t){return e({type:"LOGOUT_SUCCESS"})},send_form:function(t){return e(ee(t))},get_points:function(t){return e(te(t))}}}))(ce),ue=n(135),se=n(50),pe=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(ue.DataTable,{value:this.props.points,id:"dataTable"},r.a.createElement(se.Column,{field:"x",header:"X"}),r.a.createElement(se.Column,{field:"y",header:"Y"}),r.a.createElement(se.Column,{field:"r",header:"R"}),r.a.createElement(se.Column,{field:"hit",header:"Hit"}))}}]),t}(a.Component);var fe=Object(d.connect)((function(e){return{points:e.user.points}}),(function(e){return{}}))(pe),me=function(e){function t(){return Object(j.a)(this,t),Object(E.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.notifications;return r.a.createElement("div",null,r.a.createElement(oe,null),r.a.createElement("div",{className:"content_point point_container"},r.a.createElement("h2",null,"\u0422\u041e\u0427\u041a\u0418"),r.a.createElement(le,null),r.a.createElement(ae,null),r.a.createElement(fe,null),r.a.createElement(m.a,{notifications:e})))}}]),t}(a.Component);var he=Object(d.connect)((function(e){return{notifications:e.notifications}}),(function(e){return{}}))(me);var de=r.a.createElement("div",null,r.a.createElement(g.c,{path:"/",component:q},r.a.createElement(g.a,{component:M}),r.a.createElement(g.c,{path:"/login",component:H}),r.a.createElement(g.c,{path:"/registration",component:Z})),r.a.createElement(g.c,{path:"/points",component:function(e){var t=function(t){function n(){return Object(j.a)(this,n),Object(E.a)(this,Object(_.a)(n).apply(this,arguments))}return Object(S.a)(n,t),Object(y.a)(n,[{key:"componentWillMount",value:function(){this.checkAuth(this.props.user)}},{key:"componentWillReceiveProps",value:function(e){this.checkAuth(e.user)}},{key:"checkAuth",value:function(e){e.auth||this.props.dispatch({type:"ROUTING",payload:{method:"replace",nextUrl:"/login"}})}},{key:"render",value:function(){return r.a.createElement("div",null,!0===this.props.user.auth?r.a.createElement(e,this.props):null)}}]),n}(r.a.Component);return Object(d.connect)((function(e){return{user:e.user}}))(t)}(he)}),r.a.createElement(g.c,{path:"*",component:$})),be=function(){try{var e=window.sessionStorage.getItem("app_state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),ve=Object(i.createStore)(h,be,Object(b.composeWithDevTools)(Object(i.applyMiddleware)(c.a,O.a,(function(e){return function(e){return function(t){return"ROUTING"===t.type&&g.e[t.payload.method](t.payload.nextUrl),e(t)}}}))));ve.subscribe((function(){!function(e){try{var t=JSON.stringify(e);window.sessionStorage.setItem("app_state",t)}catch(n){}}(ve.getState())})),window.store=ve,Object(o.render)(r.a.createElement(d.Provider,{store:ve},r.a.createElement(g.d,{history:g.e,routes:de})),document.getElementById("root"))},67:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.5cb077bb.chunk.js.map